{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\n\nlet intervalId;\nlet initTime;\nconst refs = {\n  startBtn: document.querySelector('[data-start]'),\n  dateTimePicker: document.querySelector('#datetime-picker'),\n  dataDays: document.querySelector('[data-days]'),\n  dataHours: document.querySelector('[data-hours]'),\n  dataMinutes: document.querySelector('[data-minutes]'),\n  dataSeconds: document.querySelector('[data-seconds]'),\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    if (selectedDate <= new Date()) {\n      iziToast.error({\n        title: '❌',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      refs.startBtn.disabled = true;\n    } else {\n      initTime = selectedDate;\n      refs.startBtn.disabled = false;\n    }\n  },\n};\n\nflatpickr(refs.dateTimePicker, options);\n\nrefs.startBtn.addEventListener('click', () => {\n  refs.startBtn.disabled = true;\n  refs.dateTimePicker.disabled = true;\n\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const diff = initTime - currentTime;\n    if (diff <= 0) {\n      clearInterval(intervalId);\n      iziToast.info({\n        title: 'Timer',\n        message: 'Time is up!',\n      });\n      refs.dateTimePicker.disabled = false;\n      return;\n    }\n    const time = convertMs(diff);\n    refs.dataDays.textContent = time.d.toString().padStart(2, '0');\n    refs.dataHours.textContent = time.h.toString().padStart(2, '0');\n    refs.dataMinutes.textContent = time.m.toString().padStart(2, '0');\n    refs.dataSeconds.textContent = time.s.toString().padStart(2, '0');\n  }, 1000);\n});\n\nfunction convertMs(ms) {\n  const s = Math.floor(ms / 1000);\n  const m = Math.floor(s / 60);\n  const h = Math.floor(m / 60);\n  const d = Math.floor(h / 24);\n\n  return {\n    d: d % 24,\n    h: h % 24,\n    m: m % 60,\n    s: s % 60,\n  };\n}\n"],"names":["intervalId","initTime","refs","options","selectedDates","selectedDate","iziToast","flatpickr","currentTime","diff","time","convertMs","ms","s","m","h"],"mappings":"2GAIA,IAAIA,EACAC,EACJ,MAAMC,EAAO,CACX,SAAU,SAAS,cAAc,cAAc,EAC/C,eAAgB,SAAS,cAAc,kBAAkB,EACzD,SAAU,SAAS,cAAc,aAAa,EAC9C,UAAW,SAAS,cAAc,cAAc,EAChD,YAAa,SAAS,cAAc,gBAAgB,EACpD,YAAa,SAAS,cAAc,gBAAgB,CACtD,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACtBC,EAAS,MAAM,CACb,MAAO,IACP,QAAS,qCACT,SAAU,UAClB,CAAO,EACDJ,EAAK,SAAS,SAAW,KAEzBD,EAAWI,EACXH,EAAK,SAAS,SAAW,GAE5B,CACH,EAEAK,EAAUL,EAAK,eAAgBC,CAAO,EAEtCD,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5CA,EAAK,SAAS,SAAW,GACzBA,EAAK,eAAe,SAAW,GAE/BF,EAAa,YAAY,IAAM,CAC7B,MAAMQ,EAAc,KAAK,MACnBC,EAAOR,EAAWO,EACxB,GAAIC,GAAQ,EAAG,CACb,cAAcT,CAAU,EACxBM,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,aACjB,CAAO,EACDJ,EAAK,eAAe,SAAW,GAC/B,MACD,CACD,MAAMQ,EAAOC,EAAUF,CAAI,EAC3BP,EAAK,SAAS,YAAcQ,EAAK,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC7DR,EAAK,UAAU,YAAcQ,EAAK,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC9DR,EAAK,YAAY,YAAcQ,EAAK,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EAChER,EAAK,YAAY,YAAcQ,EAAK,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,CACjE,EAAE,GAAI,CACT,CAAC,EAED,SAASC,EAAUC,EAAI,CACrB,MAAMC,EAAI,KAAK,MAAMD,EAAK,GAAI,EACxBE,EAAI,KAAK,MAAMD,EAAI,EAAE,EACrBE,EAAI,KAAK,MAAMD,EAAI,EAAE,EAG3B,MAAO,CACL,EAHQ,KAAK,MAAMC,EAAI,EAAE,EAGlB,GACP,EAAGA,EAAI,GACP,EAAGD,EAAI,GACP,EAAGD,EAAI,EACX,CACA"}